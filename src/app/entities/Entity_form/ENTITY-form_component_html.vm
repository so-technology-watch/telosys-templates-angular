<div class="material-card-wide mdl-card mdl-shadow--2dp form-card">
  <div class="mdl-card__title mdl-card--border">
    <h2 class="mdl-card__title-text">{{ title }}</h2>
  </div>
  <form [formGroup]="form" novalidate (ngSubmit)="save()">
    <div class="add-edit-form">
      <md-grid-list cols="2" rowHeight="70px">
#foreach ( $attrib in $entity.attributes)
#if ($attrib.isKeyElement())
        <md-grid-tile [colspan]="1" [rowspan]="1">
          <md-input-container class="form-full-width">
            <input mdInput placeholder="${attrib.name} (disabled)" formControlName="${attrib.name}">
          </md-input-container>
        </md-grid-tile>
#elseif ($attrib.isDateType())
        <md-grid-tile [colspan]="1" [rowspan]="1">
          <md-input-container class="form-full-width">
            <input mdInput ${SHARP}${attrib.name} maxlength="4" placeholder="${attrib.name}" required formControlName="${attrib.name}">
            <md-hint align="end">{{${attrib.name}.value.length}} / 4</md-hint>
            <md-error *ngIf="form.controls.${attrib.name}.hasError('required')">
              ${attrib.name} is required
            </md-error>
            <md-error *ngIf="form.controls.${attrib.name}.hasError('pattern')">
              Not a valid year (Only numbers and 4 digits)
            </md-error>
          </md-input-container>
        </md-grid-tile>
#elseif ( $attrib.isFK() )
#set($referencedEntity = $fn.uncapitalize($attrib.referencedEntityName))
#set($keyAttrib = $attrib.referencedEntity.keyAttribute.name)
        <md-grid-tile [colspan]="1" [rowspan]="1">
          <md-select placeholder="${attrib.referencedEntityName}" formControlName="$attrib.name" name="${referencedEntity}" class="form-full-width">
            <md-option [value]="">
              N/A
            </md-option>
            <md-option *ngFor="let ${referencedEntity} of ${referencedEntity}sData" [value]="${referencedEntity}.$keyAttrib">
#set($options = "{{ ${referencedEntity}.$keyAttrib }} | ")
#foreach ( $refAttrib in $attrib.referencedEntity.attributes)
#if ($foreach.count < $attrib.referencedEntity.attributes.size())
#set($options = $options + "{{ ${referencedEntity}.${refAttrib.name} }} - ")
#else
#set($options = $options + "{{ ${referencedEntity}.${refAttrib.name} }}")
#end
#end
				$options
            </md-option>
          </md-select>
        </md-grid-tile>
#else
        <md-grid-tile [colspan]="1" [rowspan]="1">
          <md-input-container class="form-full-width">
            <input mdInput placeholder="${attrib.name}" required formControlName="${attrib.name}">
            <md-error *ngIf="!form.controls.${attrib.name}.valid">
              ${attrib.name} is required
            </md-error>
          </md-input-container>
        </md-grid-tile>	
#end
#end
      </md-grid-list>
    </div>
    <div class="mdl-card__actions mdl-card--border">
      <div class="buttonHolder">
        <button type="submit" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary" [disabled]="!form.valid">
        Save
      </button>
        <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--accent" (click)="initForm()">
        Reset
      </button>
      </div>
    </div>
  </form>
</div>